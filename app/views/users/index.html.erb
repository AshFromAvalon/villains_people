<div class="home-banner" style="background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://mir-s3-cdn-cf.behance.net/project_modules/fs/d3327585963513.5d8b73a6567dc.jpg ')">
  <div class="container">
    <div class="col-12">
      <h1>Villains <br>People</h1>
      <p><a href="#villains-index" class="btn btn-primary rounded-pill btn-lg mt-5">Find the villain you need</a></p>
    </div>
  </div>
</div>

<div class="villains-index d-flex" id="villains-index">
  <div class="listing">
    <h1 class="text-center text-uppercase mt-4 mb-5">All our villains</h1>
    <!-- Checkboxes -->
    <div class="filters text-center text-secondary">
      <h3>Filter by category</h3>
      <%= form_tag users_path, method: :get, class: "filter_search" do %>
        <% Crime::CATEGORIES.each do |category| %>
          <%= check_box_tag "category[#{category}]", category, params[:category]&.include?(category) %>
          <%= label_tag "category[#{category}]", category %>
        <% end %>
      <div class="d-block p-4">
        <div class="d-flex justify-content-between">

          <%= submit_tag "Apply filters", class: 'btn btn-primary' %>
        <% end %>
        <%= form_tag users_path, method: :get, class: "filter_search" do %>
          <% check_box_tag "category[]" %>
          <%= submit_tag "Clear filters", class: 'btn btn-outline-primary' %>
        <% end %>
        </div>
      </div>
    </div>
    <div class="villains-cards d-flex flex-wrap mt-4 justify-content-center">
      <% @users.each do |user| %>
        <% if user.cover_pic.attached? %>
          <a href="/users/<%= user.id %>" class="villain-card" style="background-image: url(<%= cl_image_path user.profile_pic.key, height: 300, width: 400, crop: :fill %>);">
            <span><%= user.user_name %></span>
          </a>
        <% else %>
          <a href="/users/<%= user.id %>" class="villain-card" style="background-image: url('https://i.pinimg.com/originals/9f/c2/e8/9fc2e8646f9d363edb5b746bcb77ef85.png');">
            <span><%= user.user_name %></span>
          </a>
        <% end %>
      <% end %>
    </div>
  </div>

  <div id="map"
      style="width: 100%; height: 100vh;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
